<!DOCTYPE html>
<html lang="en">
<head>
    <title>API Docs |  Node Boilerplate</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="media/css/restdown.css">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
</head>
<body>
  <div id="header">
    <a href="http://github.com/lukealbao/node-boilerplate">
      <h1>API Docs |  Node Boilerplate</h1>
    </a>
  </div>

    <div id="sidebar">
<ul>
  <li><div><a href="#get-started">Get started</a></div></li>
  <li><div><a href="#initial-configuration">Initial configuration</a></div>
  <ul>
    <li><div><a href="#personalize-your-repo">Personalize your repo</a></div></li>
    <li><div><a href="#configure">Configure</a></div></li>
    <li><div><a href="#set-up-a-database">Set up a database</a></div></li>
  </ul></li>
  <li><div><a href="#conventions">Conventions</a></div>
  <ul>
    <li><div><a href="#app-code">App code</a></div></li>
  </ul></li>
</ul>

    </div>
    <div id="content">

<h1>λαlbao Boilerplate</h1>
<div class="intro">


<p>This repo provides a barebones structure for a Nodejs service built on
<code>node-restify</code> and <code>sequelize</code>. It allows easy configuring of separate
environments via extending defaults in the <code>config/</code> directory, as
well as some specialized <code>make</code> targets for easy setup and deployment.</p>


</div>
<h1 id="get-started">Get started</h1>

<ul>
<li>Download the source @ https://github.com/lukealbao/boilerplate/releases/latest</li>
<li>Run <code>git init</code></li>
<li>That's it. If you want deeper instructions (which you do), keep reading.</li>
</ul>

<h1 id="initial-configuration">Initial configuration</h1>

<p>Before you start writing some code, you'll need to do a couple house
cleaning things first.</p>

<h2 id="personalize-your-repo">Personalize your repo</h2>

<ul>
<li>[ ] Set up a git pre-commit hook for linting:
<code>make githooks</code></li>
<li>[ ] Run <code>npm install</code>. Out of the box you will get the dependencies
listed below.</li>
<li>[ ] Change the <code>name</code> and <code>version</code> in <code>package.json</code>.</li>
</ul>

<h2 id="configure">Configure</h2>

<p>Configuration is a chore. This will be a little easier. This
boilerplate attempts to modularize configuration to facilitate
configuring different environments. Here's what you need to know:</p>

<ol>
<li>An "environment" is defined by the <code>NODE_ENV</code> string in the
environment of the user running the Node process. This appears in
<code>process.env.NODE_ENV</code> variable in a Node process. Setting this is
done via your shell environment.</li>
<li>The <code>config</code> folder exports a single object, which contains the
<em>active</em> configuration according to the current
<code>NODE_ENV</code>. Elsewhere in your application code, you should
<code>require('./config')</code> and let the environment set the differences.</li>
<li>You set your default configurations in <code>config/defaults.js</code>.</li>
<li>You set overrides or extensions for various environments by
configuring <code>config/&lt;environment-name&gt;.js</code>.</li>
<li>Environment configurations <em>extend</em> and <em>overwrite</em> defaults. Thus,
any configuration in the <code>default.js</code> that is not overwritten by an
environment configuration will be present in the exported
configuration - which helps minimize duplication. </li>
</ol>

<p>See <code>config/index.js</code> for more details on customizing
configurations. <strong>PROTIP:</strong> From the root of the project directory,
you can call <code>make printcfg</code> to see the entire <code>config</code> exported in
the current environment, or use <code>make cfg-&lt;element&gt;</code> for a specific
item using dot notation. E.g., <code>make cfg-db.user</code> will print <code>root</code>
under a fresh boilerplate install.</p>

<h2 id="set-up-a-database">Set up a database</h2>

<p><code>make newdb</code> will give you a new database, provided your database
daemon is running, and you have configured a database name in your <code>config</code>.</p>

<p>Once you have defined your models and added them to the object
exported by <code>lib/db.js</code>, you can <code>make checkdb</code>, and it will create
your schema.</p>

<h1 id="conventions">Conventions</h1>

<h2 id="app-code">App code</h2>

<ul>
<li>Put your restify declarations in <code>api.js</code>. By default, <code>index.js</code>
will spin up a worker running <code>api.js</code> for each available CPU.</li>
<li>Define handlers in the <code>handlers/</code> directory. Each file in that
directory should export a single restify-compliant (i.e.,
<code>(req, res, next)</code> signature) function. The <code>handlers/index.js</code>
helper script will export the <code>handlers</code> directory as a single
object, attaching all files as camelCased sub-object. So if you add
a new handler in <code>/handlers/get-all-the-things.js</code>, you can access
it with <code>require('./handlers').getAllTheThings</code>. Pretty cool!</li>
</ul>

    </div> <!-- #content -->
<script type="text/javascript" charset="utf-8">
$(function() {
    var headerHeight = $("#header").height();

    var sections = $("#content h1[id], #content h2[id]");
    var sectionOffsets = [];
    var slack = 100;  // Give the section scroll some slack (in pixels).
    sections.each(function(elem) {
        sectionOffsets.push($(this).offset().top - headerHeight - slack);
    });

    var currSectionIdx = -1;
    function getSectionIdx(scrollDistance) {
        if (scrollDistance < sectionOffsets[0]) {
            return -1;
        } else {
            for (var id = sectionOffsets.length; id > 0; id--) {
                if (scrollDistance > sectionOffsets[id - 1]) {
                    return id - 1;
                    break;
                }
            }
        }
    }

    /** {{{ http://code.activestate.com/recipes/577787/ (r2) */
    _slugify_strip_re = /[^\w\s-]/g;
    _slugify_hyphenate_re = /[-\s]+/g;
    function slugify(s) {
      s = s.replace(_slugify_strip_re, '').trim().toLowerCase();
      s = s.replace(_slugify_hyphenate_re, '-');
      return s;
    }
    /** end of http://code.activestate.com/recipes/577787/ }}} */

    /* See <https://github.com/trentm/restdown/issues/11>. */
    function safechars(s) {
      return s.replace(_slugify_strip_re, '');
    }

    $("#content").scroll(function() {
        var scrollDistance = $("#content").scrollTop();
        var sectionIdx = getSectionIdx(scrollDistance);

        if (sectionIdx !== currSectionIdx) {
            $("#sidebar li>div").removeClass("current");
            currSectionIdx = sectionIdx;
            if (currSectionIdx >= 0) {
                var heading = $(sections[currSectionIdx]).text();
                var possibleAnchors = [
                    slugify(heading), // h1 or non-method h2
                    heading.replace(/ /g, '-'), // h2 method, just name or just endpoint
                    heading.slice(0, heading.lastIndexOf(' (')).trimRight().replace(/ /g, '-'), // h2 method, name and endpoint
                ];
                for (var i=0; i < possibleAnchors.length; i++) {
                    var anchor = safechars(possibleAnchors[i]);
                    try {
                        $("#sidebar a[href=#" + anchor + "]").parent().addClass("current");
                    } catch (e) {
                        /* Ignore error if no such element. */
                        console.log(e)
                    }
                }
            }
        }
    });
});
</script>

</body>
</html>
